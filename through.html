<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
	*{ margin:0; padding:0; }
	#box{ width:660px; height:660px; margin:100px auto;}
	#box div{ width:200px; height:200px; background:#ccc; float:left; margin:20px; position:relative; overflow:hidden; margin:10px; float:left; }
	#box .div1{ margin-right:230px;}
	span{ position:absolute; left:0; top:-200px; width:200px; height:200px; background:red; }
</style>
<script src="js/move.js"></script>
<script>
	function getDir(obj,ev){
		var x=obj.offsetLeft+obj.offsetWidth/2-ev.clientX;
		var y=obj.offsetTop+obj.offsetHeight/2-ev.clientY;
		// 根据x、y，取反正切，求得转过的角度，再转化为弧度，再转化为四个方位对应的case值，
		return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;
	}
	function through(obj){
		var oS=obj.children[0];
		obj.onmouseenter=function (ev){
			var oEvent=ev||event;
			var dir=getDir(obj,oEvent);
			switch(dir){
				case 0:
					oS.style.left=200+'px';
					oS.style.top=0;
					break;
				case 1:
					oS.style.left=0;
					oS.style.top=200+'px';
					break;
				case 2:
					oS.style.left=-200+'px';
					oS.style.top=0;
					break;
				case 3:
					oS.style.left=0;
					oS.style.top=-200+'px';
					break;
			}
			Startmove(oS,{left:0,top:0});
		};
		obj.onmouseleave=function (ev){
			var oEvent=ev||event;
			var dir=getDir(obj,oEvent);
			switch(dir){
				case 0:
					Startmove(oS,{left:200,top:0});
					break;
				case 1:
					Startmove(oS,{left:0,top:200});
					break;
				case 2:
					Startmove(oS,{left:-200,top:0});
					break;
				case 3:
					Startmove(oS,{left:0,top:-200});
					break;
			}
		};
	}
	window.onload=function (){
		var oBox=document.getElementById('box');
		var aDiv=oBox.children;		
		for(var i=0; i<aDiv.length; i++){
			through(aDiv[i]);
		}
	};
</script>
</head>

<body>
<div id="box">
	<div>
    	<span></span>
    </div>
    <div>
    	<span></span>
    </div>
    <div>
    	<span></span>
    </div>
	<div class="div1">
    	<span></span>
    </div>
    <div>
    	<span></span>
    </div>
    <div>
    	<span></span>
    </div>
	<div>
    	<span></span>
    </div>
    <div>
    	<span></span>
    </div>
</div>
</body>
</html>



















